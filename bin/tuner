#!/usr/bin/env node

var program = require('commander');
var Tuner = require('../lib/tuner');

program
    .version(Tuner.version)
    .usage('[options] <command>...')
    .option('-v, --verbose', 'Show extra information');

program
    .command('convert [dir]')
    .description('Processes the files in the specified directory')
    .action(
        function(dir) {
            dir = dir || process.cwd();
            var tuner = new Tuner({verbose: program.verbose});
            tuner.processDirectory(dir);
        }
    );

program
    .command('clean [dir]')
    .description('Removes the flac files from the specified directory')
    .action(
        function(dir) {
            dir = dir || process.cwd();
            var tuner = new Tuner({verbose: program.verbose});
            tuner.cleanDirectory(dir);
        }
    );

program.parse(process.argv);
